[mysqld]
skip-name-resolve
performance_schema = ON
max_connections = 151
max_allowed_packet = 64M
wait_timeout = 600
interactive_timeout = 600
log_error = /var/log/mysql/mysql_error.log

# Keep per-connection buffers conservative to avoid OOM under concurrency.
sort_buffer_size = 2M
join_buffer_size = 2M
read_buffer_size = 1M
read_rnd_buffer_size = 1M

thread_cache_size = 16
table_open_cache = 2048
table_definition_cache = 1024

tmp_table_size = 64M
max_heap_table_size = 64M

# Query cache is disabled for modern workloads.
query_cache_type = OFF
query_cache_size = 0

# InnoDB defaults tuned for a single-node WordPress workload.
innodb_buffer_pool_size = 1024M
innodb_log_file_size = 256M
innodb_flush_method = O_DIRECT
innodb_flush_log_at_trx_commit = 1
innodb_flush_neighbors = 0
innodb_adaptive_hash_index = OFF

expire_logs_days = 14

[mysqldump]
max_allowed_packet = 64M
